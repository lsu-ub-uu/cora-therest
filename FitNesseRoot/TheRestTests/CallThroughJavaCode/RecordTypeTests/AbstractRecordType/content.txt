!contents -R2 -g -p -f -h
| import |
| epc.therest.fitnesse |

!1 Abstract record type
An abstract record type (the parent) is used to create a group of record type siblings (the children). Each child defines a subset of the data the parent defines. Â  

!***> Create a metadataGroup(plant)

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? |
| metadataGroup | {"name":"metadata","attributes":{"type":"group"},"children":[{"name":"recordInfo","children":[{"id":"plantNew"}]},{"textId":"plantText"},{"defTextId":"plantDefText"},{"dataId":"plant"},{"name":"childReferences","children":[{"name":"childReference","children":[{"ref":"recordInfoNew"},{"repeatMin":"1"},{"repeatMax":"1"}]},{"name":"childReference","children":[{"ref":"id"},{"repeatMin":"1"},{"repeatMax":"1"}]}]}]} | {"record":{"data":{"children":[{"children":[{"id":"plantNew"},{"type":"metadataGroup"},{"createdBy":"userId"}],"name":"recordInfo"},{"textId":"plantText"},{"defTextId":"plantDefText"},{"dataId":"plant"},{"children":[{"children":[{"ref":"recordInfoNew"},{"repeatMin":"1"},{"repeatMax":"1"}],"name":"childReference"},{"children":[{"ref":"id"},{"repeatMin":"1"},{"repeatMax":"1"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/plantNew","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/plantNew","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/plantNew","accept":"application/uub+record+json"}}}} | CREATED |
| metadataGroup | {"name":"metadata","attributes":{"type":"group"},"children":[{"name":"recordInfo","children":[{"id":"plant"}]},{"textId":"plantText"},{"defTextId":"plantDefText"},{"dataId":"plant"},{"name":"childReferences","children":[{"name":"childReference","children":[{"ref":"recordInfo"},{"repeatMin":"1"},{"repeatMax":"1"}]},{"name":"childReference","children":[{"ref":"id"},{"repeatMin":"1"},{"repeatMax":"1"}]}]}]} | {"record":{"data":{"children":[{"children":[{"id":"plant"},{"type":"metadataGroup"},{"createdBy":"userId"}],"name":"recordInfo"},{"textId":"plantText"},{"defTextId":"plantDefText"},{"dataId":"plant"},{"children":[{"children":[{"ref":"recordInfo"},{"repeatMin":"1"},{"repeatMax":"1"}],"name":"childReference"},{"children":[{"ref":"id"},{"repeatMin":"1"},{"repeatMax":"1"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/plant","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/plant","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/plant","accept":"application/uub+record+json"}}}} | CREATED |

*!
!***> Create an abstract recordType(plant)

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? |
| recordType | {"name":"recordType","children":[{"name":"recordInfo","children":[{"id":"plant"}]},{"metadataId":"plant"},{"abstract":"true"},{"presentationViewId":"pgPlantView"},{"presentationFormId":"pgPlantForm"},{"newMetadataId":"plantNew"},{"newPresentationFormId":"pgPlantForm"},{"listPresentationViewId":"pgPlantList"},{"searchMetadataId":"plantSearch"},{"searchPresentationFormId":"pgPlantSearchForm"},{"userSuppliedId":"true"},{"selfPresentationViewId":"pgPlantSelf"},{"permissionKey":"PLANT"}]} | {"record":{"data":{"children":[{"children":[{"id":"plant"},{"type":"recordType"},{"createdBy":"userId"}],"name":"recordInfo"},{"metadataId":"plant"},{"abstract":"true"},{"presentationViewId":"pgPlantView"},{"presentationFormId":"pgPlantForm"},{"newMetadataId":"plantNew"},{"newPresentationFormId":"pgPlantForm"},{"listPresentationViewId":"pgPlantList"},{"searchMetadataId":"plantSearch"},{"searchPresentationFormId":"pgPlantSearchForm"},{"userSuppliedId":"true"},{"selfPresentationViewId":"pgPlantSelf"},{"permissionKey":"PLANT"}],"name":"recordType"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/plant","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/plant","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/plant","accept":"application/uub+record+json"}}}} | CREATED |

*!
!***> Create a recordType(tree)

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? |
| recordType | {"name":"recordType","children":[{"name":"recordInfo","children":[{"id":"tree"}]},{"metadataId":"plant"},{"abstract":"false"},{"parentId":"plant"},{"presentationViewId":"pgPlantView"},{"presentationFormId":"pgPlantForm"},{"newMetadataId":"plantNew"},{"newPresentationFormId":"pgPlantForm"},{"listPresentationViewId":"pgPlantList"},{"searchMetadataId":"plantSearch"},{"searchPresentationFormId":"pgPlantSearchForm"},{"userSuppliedId":"true"},{"selfPresentationViewId":"pgPlantSelf"},{"permissionKey":"PLANT"}]} | {"record":{"data":{"children":[{"children":[{"id":"tree"},{"type":"recordType"},{"createdBy":"userId"}],"name":"recordInfo"},{"metadataId":"plant"},{"abstract":"false"},{"parentId":"plant"},{"presentationViewId":"pgPlantView"},{"presentationFormId":"pgPlantForm"},{"newMetadataId":"plantNew"},{"newPresentationFormId":"pgPlantForm"},{"listPresentationViewId":"pgPlantList"},{"searchMetadataId":"plantSearch"},{"searchPresentationFormId":"pgPlantSearchForm"},{"userSuppliedId":"true"},{"selfPresentationViewId":"pgPlantSelf"},{"permissionKey":"PLANT"}],"name":"recordType"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/tree","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/tree","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/tree","accept":"application/uub+record+json"}}}} | CREATED |

*!
!***> Create a recordType(flower)

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? |
| recordType | {"name":"recordType","children":[{"name":"recordInfo","children":[{"id":"flower"}]},{"metadataId":"plant"},{"abstract":"false"},{"parentId":"plant"},{"presentationViewId":"pgPlantView"},{"presentationFormId":"pgPlantForm"},{"newMetadataId":"plantNew"},{"newPresentationFormId":"pgPlantForm"},{"listPresentationViewId":"pgPlantList"},{"searchMetadataId":"plantSearch"},{"searchPresentationFormId":"pgPlantSearchForm"},{"userSuppliedId":"true"},{"selfPresentationViewId":"pgPlantSelf"},{"permissionKey":"PLANT"}]} | {"record":{"data":{"children":[{"children":[{"id":"flower"},{"type":"recordType"},{"createdBy":"userId"}],"name":"recordInfo"},{"metadataId":"plant"},{"abstract":"false"},{"parentId":"plant"},{"presentationViewId":"pgPlantView"},{"presentationFormId":"pgPlantForm"},{"newMetadataId":"plantNew"},{"newPresentationFormId":"pgPlantForm"},{"listPresentationViewId":"pgPlantList"},{"searchMetadataId":"plantSearch"},{"searchPresentationFormId":"pgPlantSearchForm"},{"userSuppliedId":"true"},{"selfPresentationViewId":"pgPlantSelf"},{"permissionKey":"PLANT"}],"name":"recordType"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/flower","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/flower","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/flower","accept":"application/uub+record+json"}}}} | CREATED |

*!
!***> Create data(tree, flower)

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? |
| tree | {"name":"plant","children":[{"name":"recordInfo","children":[{"id":"tree1"}]},{"id":"notRealyAnId"}]} | {"record":{"data":{"children":[{"children":[{"id":"tree1"},{"type":"tree"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"notRealyAnId"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"}}}} | CREATED |
| flower | {"name":"plant","children":[{"name":"recordInfo","children":[{"id":"flower1"}]},{"id":"theRose"}]} | {"record":{"data":{"children":[{"children":[{"id":"flower1"},{"type":"flower"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"theRose"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"}}}} | CREATED |

*!
!***> Try to create data on plant, this should fail as plant is abstract

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? |
| plant | {"name":"plant","children":[{"name":"recordInfo","children":[{"id":"tree1"}]},{"id":"notRealyAnId"}]} | Data creation on abstract recordType:plant is not allowed | METHOD_NOT_ALLOWED |

*!
!***> List data(tree, flower, plant)

!| RecordEndpointFixture |
| type | testReadRecordList? | getStatusType? |
| tree | {"recordList":{"fromNo":"0","records":[{"record":{"data":{"children":[{"children":[{"id":"tree1"},{"type":"tree"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"notRealyAnId"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"}}}}],"totalNo":"0","toNo":"0","containRecordsOfType":"tree"}} | OK |
| flower | {"recordList":{"fromNo":"0","records":[{"record":{"data":{"children":[{"children":[{"id":"flower1"},{"type":"flower"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"theRose"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"}}}}],"totalNo":"0","toNo":"0","containRecordsOfType":"flower"}} | OK |
| plant | {"recordList":{"fromNo":"0","records":[{"record":{"data":{"children":[{"children":[{"id":"tree1"},{"type":"tree"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"notRealyAnId"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"}}}},{"record":{"data":{"children":[{"children":[{"id":"flower1"},{"type":"flower"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"theRose"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"}}}}],"totalNo":"1","toNo":"1","containRecordsOfType":"plant"}} | OK |

*!
!***> Update data(tree, flower)

!| RecordEndpointFixture |
| type | id | json | testUpdateRecord? | getStatusType? |
| tree | tree1 | {"children":[{"children":[{"id":"tree1"},{"type":"tree"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"notRealyAnId"}],"name":"plant"} | {"record":{"data":{"children":[{"children":[{"id":"tree1"},{"type":"tree"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"notRealyAnId"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"}}}} | OK |
| flower | flower1 | {"name":"plant","children":[{"name":"recordInfo","children":[{"id":"flower1"},{"type":"flower"},{"createdBy":"userId"}]},{"id":"theRosee"}]} | {"record":{"data":{"children":[{"children":[{"id":"flower1"},{"type":"flower"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"theRosee"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"}}}} | OK |

*!
!***> Try to update data on plant, this should fail as plant is abstract

!| RecordEndpointFixture |
| type | id | json | testUpdateRecord? | getStatusType? |
| plant | flower1 | {"name":"plant","children":[{"name":"recordInfo","children":[{"id":"flower1"},{"type":"plant"},{"createdBy":"userId"}]},{"id":"theRosee"}]} | Data update on abstract recordType:plant is not allowed | METHOD_NOT_ALLOWED |

*!
!***> Read data(tree1, flower1)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| tree | tree1 | {"record":{"data":{"children":[{"children":[{"id":"tree1"},{"type":"tree"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"notRealyAnId"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/tree/tree1","accept":"application/uub+record+json"}}}} | OK |
| flower | flower1 | {"record":{"data":{"children":[{"children":[{"id":"flower1"},{"type":"flower"},{"createdBy":"userId"}],"name":"recordInfo"},{"id":"theRosee"}],"name":"plant"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/flower/flower1","accept":"application/uub+record+json"}}}} | OK |

*!
!***> Try to read data on plant, this should fail as plant is abstract

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| plant | flower1 | Reading record: flower1 on the abstract recordType:plant is not allowed | METHOD_NOT_ALLOWED |

*!
!***> Delete data(tree1, flower1)

!| RecordEndpointFixture |
| type | id | testDeleteRecord? | getStatusType? |
| tree | tree1 | | OK |
| flower | flower1 | | OK |

*!
!***> Try to delete data on plant, this should fail as plant is abstract

!| RecordEndpointFixture |
| type | id | testDeleteRecord? | getStatusType? |
| plant | flower1 | Deleting record: flower1 on the abstract recordType:plant is not allowed | METHOD_NOT_ALLOWED |

*!
