!contents -R2 -g -p -f -h
| import |
| se.uu.ub.cora.therest.fitnesse |

!1 !-TextTest-!
A test that first reads all predefined metadata needed to be able to add texts to the system, and then tests adding and updating texts.

!2 Read metadata defined in code to make sure it is correct
!***> Read collectionItems (defaultItem, alternativeItem)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataCollectionItem | defaultItem | {"record":{"data":{"children":[{"children":[{"name":"id","value":"defaultItem"},{"name":"type","value":"metadataCollectionItem"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"default"},{"name":"textId","value":"defaultItemText"},{"name":"defTextId","value":"defaultItemDefText"}],"name":"metadata","attributes":{"type":"collectionItem"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/defaultItem","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/defaultItem","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/defaultItem"}}}} | OK |
| metadataCollectionItem | alternativeItem | {"record":{"data":{"children":[{"children":[{"name":"id","value":"alternativeItem"},{"name":"type","value":"metadataCollectionItem"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"alternative"},{"name":"textId","value":"alternativeItemText"},{"name":"defTextId","value":"alternativeItemDefText"}],"name":"metadata","attributes":{"type":"collectionItem"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/alternativeItem","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/alternativeItem","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/alternativeItem"}}}} | OK |

*!
!***> Read itemCollection (textPartTypeCollection)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataItemCollection | textPartTypeCollection | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartTypeCollection"},{"name":"type","value":"metadataItemCollection"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"textPartTypeCollection"},{"name":"textId","value":"textPartTypeCollectionTextId"},{"name":"defTextId","value":"textPartTypeCollectionDefTextId"},{"children":[{"repeatId":"1","name":"ref","value":"default"},{"repeatId":"2","name":"ref","value":"alternative"}],"name":"collectionItemReferences"}],"name":"metadata","attributes":{"type":"itemCollection"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataItemCollection/textPartTypeCollection","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataItemCollection/textPartTypeCollection","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataItemCollection/textPartTypeCollection"}}}} | OK |

*!
!***> Read collectionVariables (textPartTypeCollectionVar, textPartTypeDefaultCollectionVar, textPartTypeAlternativeCollectionVar)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataCollectionVariable | textPartTypeCollectionVar | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartTypeCollectionVar"},{"name":"type","value":"metadataCollectionVariable"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"type"},{"name":"textId","value":"textPartTypeCollectionVarTextId"},{"name":"defTextId","value":"textPartTypeCollectionVarDefTextId"},{"name":"refCollectionId","value":"textPartTypeCollection"}],"name":"metadata","attributes":{"type":"collectionVariable"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeCollectionVar","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeCollectionVar","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeCollectionVar"}}}} | OK |
| metadataCollectionVariable | textPartTypeDefaultCollectionVar | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartTypeDefaultCollectionVar"},{"name":"type","value":"metadataCollectionVariable"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"type"},{"name":"textId","value":"textPartTypeDefaultCollectionVarTextId"},{"name":"defTextId","value":"textPartTypeDefaultCollectionVarDefTextId"},{"name":"refCollectionId","value":"textPartTypeCollection"},{"name":"refParentId","value":"textPartTypeCollectionVar"},{"name":"finalValue","value":"default"}],"name":"metadata","attributes":{"type":"collectionVariable"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeDefaultCollectionVar","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeDefaultCollectionVar","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeDefaultCollectionVar"}}}} | OK |
| metadataCollectionVariable | textPartTypeAlternativeCollectionVar | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartTypeAlternativeCollectionVar"},{"name":"type","value":"metadataCollectionVariable"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"type"},{"name":"textId","value":"textPartTypeAlternativeCollectionVarTextId"},{"name":"defTextId","value":"textPartTypeAlternativeCollectionVarDefTextId"},{"name":"refCollectionId","value":"textPartTypeCollection"},{"name":"refParentId","value":"textPartTypeCollectionVar"},{"name":"finalValue","value":"alternative"}],"name":"metadata","attributes":{"type":"collectionVariable"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeAlternativeCollectionVar","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeAlternativeCollectionVar","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/textPartTypeAlternativeCollectionVar"}}}} | OK |

*!
!***> Read collectionItems (svItem, enItem)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataCollectionItem | svItem | {"record":{"data":{"children":[{"children":[{"name":"id","value":"svItem"},{"name":"type","value":"metadataCollectionItem"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"sv"},{"name":"textId","value":"svItemText"},{"name":"defTextId","value":"svItemDefText"}],"name":"metadata","attributes":{"type":"collectionItem"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/svItem","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/svItem","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/svItem"}}}} | OK |
| metadataCollectionItem | enItem | {"record":{"data":{"children":[{"children":[{"name":"id","value":"enItem"},{"name":"type","value":"metadataCollectionItem"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"en"},{"name":"textId","value":"enItemText"},{"name":"defTextId","value":"enItemDefText"}],"name":"metadata","attributes":{"type":"collectionItem"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/enItem","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/enItem","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionItem/enItem"}}}} | OK |

*!
!***> Read itemCollection (systemLanguagesCollection)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataItemCollection | systemLanguagesCollection | {"record":{"data":{"children":[{"children":[{"name":"id","value":"systemLanguagesCollection"},{"name":"type","value":"metadataItemCollection"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"systemLanguagesCollection"},{"name":"textId","value":"systemLanguagesCollectionTextId"},{"name":"defTextId","value":"systemLanguagesCollectionDefTextId"},{"children":[{"repeatId":"1","name":"ref","value":"svItem"},{"repeatId":"2","name":"ref","value":"enItem"}],"name":"collectionItemReferences"}],"name":"metadata","attributes":{"type":"itemCollection"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataItemCollection/systemLanguagesCollection","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataItemCollection/systemLanguagesCollection","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataItemCollection/systemLanguagesCollection"}}}} | OK |

*!
!***> Read collectionVariables (systemLanguagesCollectionVar, systemLanguageSvCollectionVar, systemLanguageEnCollectionVar)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataCollectionVariable | systemLanguagesCollectionVar | {"record":{"data":{"children":[{"children":[{"name":"id","value":"systemLanguagesCollectionVar"},{"name":"type","value":"metadataCollectionVariable"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"lang"},{"name":"textId","value":"systemLanguagesCollectionVarTextId"},{"name":"defTextId","value":"systemLanguagesCollectionVarDefTextId"},{"name":"refCollectionId","value":"systemLanguagesCollection"}],"name":"metadata","attributes":{"type":"collectionVariable"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguagesCollectionVar","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguagesCollectionVar","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguagesCollectionVar"}}}} | OK |
| metadataCollectionVariable | systemLanguageSvCollectionVar | {"record":{"data":{"children":[{"children":[{"name":"id","value":"systemLanguageSvCollectionVar"},{"name":"type","value":"metadataCollectionVariable"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"lang"},{"name":"textId","value":"systemLanguageSvCollectionVarTextId"},{"name":"defTextId","value":"systemLanguageSvCollectionVarDefTextId"},{"name":"refCollectionId","value":"systemLanguagesCollection"},{"name":"refParentId","value":"systemLanguagesCollectionVar"},{"name":"finalValue","value":"sv"}],"name":"metadata","attributes":{"type":"collectionVariable"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguageSvCollectionVar","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguageSvCollectionVar","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguageSvCollectionVar"}}}} | OK |
| metadataCollectionVariable | systemLanguageEnCollectionVar | {"record":{"data":{"children":[{"children":[{"name":"id","value":"systemLanguageEnCollectionVar"},{"name":"type","value":"metadataCollectionVariable"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"lang"},{"name":"textId","value":"systemLanguageEnCollectionVarTextId"},{"name":"defTextId","value":"systemLanguageEnCollectionVarDefTextId"},{"name":"refCollectionId","value":"systemLanguagesCollection"},{"name":"refParentId","value":"systemLanguagesCollectionVar"},{"name":"finalValue","value":"en"}],"name":"metadata","attributes":{"type":"collectionVariable"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguageEnCollectionVar","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguageEnCollectionVar","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataCollectionVariable/systemLanguageEnCollectionVar"}}}} | OK |

*!
!***> Read textVariable (textVar)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataTextVariable | textTextVar | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textTextVar"},{"name":"type","value":"metadataTextVariable"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"text"},{"name":"textId","value":"textTextVarText"},{"name":"defTextId","value":"textTextVarDefText"},{"name":"regEx","value":"(.*)"}],"name":"metadata","attributes":{"type":"textVariable"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataTextVariable/textTextVar","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataTextVariable/textTextVar","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataTextVariable/textTextVar"}}}} | OK |

*!
!***> Read metadataGroups (textPart, textPartDefault, textPartSv, textPartAlternative, textPartEn)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataGroup | textPartGroup | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"textPart"},{"name":"textId","value":"textPartGroupText"},{"name":"defTextId","value":"textPartGroupDefText"},{"children":[{"repeatId":"0","name":"ref","value":"textPartTypeCollectionVar"},{"repeatId":"1","name":"ref","value":"systemLanguagesCollectionVar"}],"name":"attributeReferences"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"textTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartGroup"}}}} | OK |
| metadataGroup | textPartDefaultGroup | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartDefaultGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"textPart"},{"name":"textId","value":"textPartDefaultGroupText"},{"name":"defTextId","value":"textPartDefaultGroupDefText"},{"name":"refParentId","value":"textPartGroup"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"textTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"},{"children":[{"repeatId":"0","name":"ref","value":"textPartTypeDefaultCollectionVar"},{"repeatId":"1","name":"ref","value":"systemLanguagesCollectionVar"}],"name":"attributeReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartDefaultGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartDefaultGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartDefaultGroup"}}}} | OK |
| metadataGroup | textPartSvGroup | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartSvGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"textPart"},{"name":"textId","value":"textPartSvGroupText"},{"name":"defTextId","value":"textPartSvGroupDefText"},{"name":"refParentId","value":"textPartDefaultGroup"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"textTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"},{"children":[{"repeatId":"0","name":"ref","value":"textPartTypeDefaultCollectionVar"},{"repeatId":"1","name":"ref","value":"systemLanguageSvCollectionVar"}],"name":"attributeReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartSvGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartSvGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartSvGroup"}}}} | OK |
| metadataGroup | textPartAlternativeGroup | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartAlternativeGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"textPart"},{"name":"textId","value":"textPartAlternativeGroupText"},{"name":"defTextId","value":"textPartAlternativeGroupDefText"},{"name":"refParentId","value":"textPartGroup"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"textTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"},{"children":[{"repeatId":"0","name":"ref","value":"textPartTypeAlternativeCollectionVar"},{"repeatId":"1","name":"ref","value":"systemLanguagesCollectionVar"}],"name":"attributeReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartAlternativeGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartAlternativeGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartAlternativeGroup"}}}} | OK |
| metadataGroup | textPartEnGroup | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textPartEnGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"textPart"},{"name":"textId","value":"textPartEnGroupText"},{"name":"defTextId","value":"textPartEnGroupDefText"},{"name":"refParentId","value":"textPartAlternativeGroup"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"textTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"},{"children":[{"repeatId":"0","name":"ref","value":"textPartTypeAlternativeCollectionVar"},{"repeatId":"1","name":"ref","value":"systemLanguageEnCollectionVar"}],"name":"attributeReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartEnGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartEnGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/textPartEnGroup"}}}} | OK |

*!
!***> Read metadataGroups (text, textDefaultAlternative, textSystemOne)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataGroup | textGroup | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"text"},{"name":"textId","value":"textGroupText"},{"name":"defTextId","value":"textGroupDefText"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"recordInfoTextGroup"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"2","children":[{"name":"ref","value":"textPartGroup"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"X"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/textGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/textGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/textGroup"}}}} | OK |
| metadataGroup | textDefaultAlternativeGroup | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textDefaultAlternativeGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"text"},{"name":"textId","value":"textDefaultAlternativeGroupText"},{"name":"defTextId","value":"textDefaultAlternativeGroupDefText"},{"name":"refParentId","value":"text"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"recordInfoTextGroup"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"2","children":[{"name":"ref","value":"textPartDefaultGroup"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"3","children":[{"name":"ref","value":"textPartAlternativeGroup"},{"name":"repeatMin","value":"0"},{"name":"repeatMax","value":"X"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/textDefaultAlternativeGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/textDefaultAlternativeGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/textDefaultAlternativeGroup"}}}} | OK |
| metadataGroup | textSystemOneGroup | {"record":{"data":{"children":[{"children":[{"name":"id","value":"textSystemOneGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"nameInData","value":"text"},{"name":"textId","value":"textSystemOneGroupText"},{"name":"defTextId","value":"textSystemOneGroupDefText"},{"name":"refParentId","value":"textDefaultAlternativeGroup"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"recordInfoTextGroup"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"2","children":[{"name":"ref","value":"textPartSvGroup"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"3","children":[{"name":"ref","value":"textPartEnGroup"},{"name":"repeatMin","value":"0"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/textSystemOneGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/textSystemOneGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/textSystemOneGroup"}}}} | OK |

*!
!***> Read recordType (text, textSystemOne)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| recordType | text | {"record":{"data":{"children":[{"name":"metadataId","value":"textGroup"},{"name":"abstract","value":"true"},{"children":[{"name":"id","value":"text"},{"name":"type","value":"recordType"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"presentationViewId","value":"textViewPGroup"},{"name":"presentationFormId","value":"textFormPGroup"},{"name":"newMetadataId","value":"textNewGroup"},{"name":"newPresentationFormId","value":"textFormNewPGroup"},{"name":"menuPresentationViewId","value":"textMenuPGroup"},{"name":"listPresentationViewId","value":"textListPGroup"},{"name":"searchMetadataId","value":"textSearchGroup"},{"name":"searchPresentationFormId","value":"textFormSearchPGroup"},{"name":"userSuppliedId","value":"true"},{"name":"permissionKey","value":"RECORDTYPE_TEXT"},{"name":"selfPresentationViewId","value":"textViewSelfPGroup"},{"name":"textId","value":"textText"},{"name":"defTextId","value":"textDefText"}],"name":"recordType"},"actionLinks":{"search":{"requestMethod":"GET","rel":"search","url":"http://localhost:8080/therest/rest/record/text/","accept":"application/uub+recordList+json"},"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/recordType/text","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/text","accept":"application/uub+record+json"},"list":{"requestMethod":"GET","rel":"list","url":"http://localhost:8080/therest/rest/record/text/","accept":"application/uub+recordList+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/recordType/text"}}}} | OK |
| recordType | textSystemOne | {"record":{"data":{"children":[{"name":"metadataId","value":"textSystemOneGroup"},{"name":"abstract","value":"false"},{"name":"parentId","value":"text"},{"children":[{"name":"id","value":"textSystemOne"},{"name":"type","value":"recordType"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"}},"name":"dataDivider"}],"name":"recordInfo"},{"name":"presentationViewId","value":"textSystemOneViewPGroup"},{"name":"presentationFormId","value":"textSystemOneFormPGroup"},{"name":"newMetadataId","value":"textSystemOneNewGroup"},{"name":"newPresentationFormId","value":"textSystemOneFormNewPGroup"},{"name":"menuPresentationViewId","value":"textSystemOneMenuPGroup"},{"name":"listPresentationViewId","value":"textSystemOneListPGroup"},{"name":"searchMetadataId","value":"textSystemOneSearchGroup"},{"name":"searchPresentationFormId","value":"textSystemOneFormSearchPGroup"},{"name":"userSuppliedId","value":"true"},{"name":"permissionKey","value":"RECORDTYPE_TEXTSYSTEMONE"},{"name":"selfPresentationViewId","value":"textSystemOneViewSelfPGroup"},{"name":"textId","value":"textSystemOneText"},{"name":"defTextId","value":"textSystemOneDefText"}],"name":"recordType"},"actionLinks":{"search":{"requestMethod":"GET","rel":"search","url":"http://localhost:8080/therest/rest/record/textSystemOne/","accept":"application/uub+recordList+json"},"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/recordType/textSystemOne","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/textSystemOne","accept":"application/uub+record+json"},"create":{"requestMethod":"POST","rel":"create","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/textSystemOne/","accept":"application/uub+record+json"},"list":{"requestMethod":"GET","rel":"list","url":"http://localhost:8080/therest/rest/record/textSystemOne/","accept":"application/uub+recordList+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/recordType/textSystemOne"}}}} | OK |

*!
!2 Test with new texts
!***> Create data of recordType text (textSystemOne)

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"myText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"default","lang":"sv"} ,"children":[{"name":"text","value":"Min svenska text"}]}]} | | CREATED |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"my2Text"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"default","lang":"sv"},"children":[{"name":"text","value":"Min andra text på svenska"}]},{"name":"textPart","attributes":{"type":"alternative","lang":"en"},"children":[{"name":"text","value":"My second text in english"}]}]} | | CREATED |

*!
!***> List data(text, textSystemOne)

!| RecordEndpointFixture |
| type | testReadRecordList? | getStatusType? |
| text | | OK |
| textSystemOne | | OK |

*!
!***> Update data of recordType text

!| RecordEndpointFixture |
| type | id | json | testUpdateRecord? | getStatusType? |
| textSystemOne | myText | {"children":[{"children":[{"name":"id","value":"myText"},{"name":"type","value":"textSystemOne"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}],"name":"recordInfo"},{"children":[{"name":"text","value":"Min svenska text uppdaterad"}],"name":"textPart","attributes":{"type":"default","lang":"sv"}}],"name":"text"} | | OK |
| textSystemOne | my2Text | {"children":[{"children":[{"name":"id","value":"my2Text"},{"name":"type","value":"textSystemOne"},{"name":"createdBy","value":"userId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}],"name":"recordInfo"},{"children":[{"name":"text","value":"Min andra text på svenska uppdaterad"}],"name":"textPart","attributes":{"type":"default","lang":"sv"}},{"children":[{"name":"text","value":"My second text in english updated"}],"name":"textPart","attributes":{"type":"alternative","lang":"en"}}],"name":"text"} | | OK |

*!
!***> Try to create data of recordType text (this should fail as the data is incorrect)

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"myNonWorking"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"default","lang":"sv"},"children":[{"name":"text","value":"TextId måste sluta på Text"}]}]} | | BAD_REQUEST |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"myNonWorkingText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"default","lang":"en"},"children":[{"name":"text","value":"English is not default language"}]}]} | | BAD_REQUEST |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"myNonWorkingText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"alternative","lang":"en"},"children":[{"name":"text","value":"Only english as language is not allowed"}]}]} | | BAD_REQUEST |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"myNonWorkingText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"default","lang":"sv"},"children":[{"name":"text","value":"Att ha samma språk(svenska) två gånger på en text fungerar inte"}]},{"name":"textPart","attributes":{"type":"alternative","lang":"sv"},"children":[{"name":"text","value":"Något annat på svenska"}]}]} | | BAD_REQUEST |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"myNonWorkingText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"default","lang":"en"},"children":[{"name":"text","value":"It does not work to have the same language(english) twice in the same text"}]},{"name":"textPart","attributes":{"type":"alternative","lang":"en"},"children":[{"name":"text","value":"Some other text in english"}]}]} | | BAD_REQUEST |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"myNonWorkingText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"default","lang":"sv"},"children":[{"name":"text","value":"Att ha flera av samma språk(engelska) på en text fungerar inte"}]},{"name":"textPart","attributes":{"type":"alternative","lang":"en"},"children":[{"name":"text","value":"It does not work to have the same language(english) twice in the same text"}]},{"name":"textPart","attributes":{"type":"alternative","lang":"en"},"children":[{"name":"text","value":"Some other text in english"}]}]} | | BAD_REQUEST |
| textSystemOne | {"name":"text","children":[{"name":"recordInfo","children":[{"name":"id","value":"myNonWorkingText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"}]},{"name":"textPart","attributes":{"type":"default","lang":"sv"},"children":[{"name":"text","value":"Att ha språk som inte är definierade(norska) på en text fungerar inte"}]},{"name":"textPart","attributes":{"type":"alternative","lang":"en"},"children":[{"name":"text","value":"An ok english text"}]},{"name":"textPart","attributes":{"type":"alternative","lang":"no"},"children":[{"name":"text","value":"Dette går ikke"}]}]} | | BAD_REQUEST |

*!
