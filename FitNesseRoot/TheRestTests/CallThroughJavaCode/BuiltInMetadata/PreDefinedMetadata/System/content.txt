!contents -R2 -g -p -f -h
| import |
| se.uu.ub.cora.therest.fitnesse |

!1 !-SystemTest-!
A test that first reads all predefined metadata needed to be able to add system data to the system.

!2 Read predefined metadata to make sure it is correct
!***> Read textVariables (systemNameTextVar)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataTextVariable | systemNameTextVar | {"record":{"data":{"children":[{"children":[{"name":"id","value":"systemNameTextVar"},{"name":"type","value":"metadataTextVariable"},{"name":"createdBy","value":"userId"},{"name":"updatedBy","value":"userId"}],"name":"recordInfo"},{"name":"nameInData","value":"systemName"},{"name":"textId","value":"systemNameTextVarText"},{"name":"defTextId","value":"systemNameTypeTextVarDefText"},{"name":"regEx","value":"(^[0-9A-Za-z:-_]{2,50}$)"}],"name":"metadata","attributes":{"type":"textVariable"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataTextVariable/systemNameTextVar","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataTextVariable/systemNameTextVar","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataTextVariable/systemNameTextVar"}}}} | OK |

*!
!***> Read metadataGroups (recordInfo, systemGroup, ssytemNewGroup)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| metadataGroup | recordInfo | {"record":{"data":{"children":[{"children":[{"name":"id","value":"recordInfo"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"name":"updatedBy","value":"userId"}],"name":"recordInfo"},{"name":"nameInData","value":"recordInfo"},{"name":"textId","value":"recordInfoText"},{"name":"defTextId","value":"recordInfoDefText"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"idTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"2","children":[{"name":"ref","value":"typeTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"3","children":[{"name":"ref","value":"createdByTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/recordInfo","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/recordInfo","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/recordInfo"}}}} | OK |
| metadataGroup | systemGroup | {"record":{"data":{"children":[{"name":"nameInData","value":"system"},{"children":[{"name":"id","value":"systemGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"name":"updatedBy","value":"userId"}],"name":"recordInfo"},{"name":"textId","value":"systemGroupText"},{"name":"defTextId","value":"systemGroupDefText"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"recordInfo"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"2","children":[{"name":"ref","value":"systemNameTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/systemGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/systemGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/systemGroup"}}}} | OK |
| metadataGroup | systemNewGroup | {"record":{"data":{"children":[{"name":"nameInData","value":"system"},{"children":[{"name":"id","value":"systemNewGroup"},{"name":"type","value":"metadataGroup"},{"name":"createdBy","value":"userId"},{"name":"updatedBy","value":"userId"}],"name":"recordInfo"},{"name":"textId","value":"systemNewGroupText"},{"name":"defTextId","value":"systemNewGroupDefText"},{"children":[{"repeatId":"1","children":[{"name":"ref","value":"recordInfoNew"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"},{"repeatId":"2","children":[{"name":"ref","value":"systemNameTextVar"},{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"}],"name":"childReference"}],"name":"childReferences"},{"name":"refParentId","value":"systemGroup"}],"name":"metadata","attributes":{"type":"group"}},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/metadataGroup/systemNewGroup","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/metadataGroup/systemNewGroup","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/metadataGroup/systemNewGroup"}}}} | OK |

*!
!***> Read recordType (system)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| recordType | system | {"record":{"data":{"children":[{"children":[{"name":"id","value":"system"},{"name":"type","value":"recordType"},{"name":"createdBy","value":"userId"},{"name":"updatedBy","value":"userId"}],"name":"recordInfo"},{"name":"metadataId","value":"systemGroup"},{"name":"presentationViewId","value":"systemViewPGroup"},{"name":"presentationFormId","value":"systemFormPGroup"},{"name":"newMetadataId","value":"systemNewGroup"},{"name":"newPresentationFormId","value":"systemFormNewPGroup"},{"name":"menuPresentationViewId","value":"systemMenuPGroup"},{"name":"listPresentationViewId","value":"systemListPGroup"},{"name":"searchMetadataId","value":"systemSearchGroup"},{"name":"searchPresentationFormId","value":"systemFormSearchPGroup"},{"name":"userSuppliedId","value":"true"},{"name":"permissionKey","value":"RECORDTYPE_SYSTEM"},{"name":"selfPresentationViewId","value":"systemViewSelfPGroup"},{"name":"abstract","value":"false"}],"name":"recordType"},"actionLinks":{"search":{"requestMethod":"GET","rel":"search","url":"http://localhost:8080/therest/rest/record/system/","accept":"application/uub+recordList+json"},"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/recordType/system","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/recordType/system","accept":"application/uub+record+json"},"create":{"requestMethod":"POST","rel":"create","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/system/","accept":"application/uub+record+json"},"list":{"requestMethod":"GET","rel":"list","url":"http://localhost:8080/therest/rest/record/system/","accept":"application/uub+recordList+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/recordType/system"}}}} | OK |

*!
!***> Read system (cora)

!| RecordEndpointFixture |
| type | id | testReadRecord? | getStatusType? |
| system | cora | {"record":{"data":{"children":[{"name":"systemName","value":"Cora"},{"children":[{"name":"id","value":"cora"},{"name":"type","value":"system"},{"name":"createdBy","value":"userId"}],"name":"recordInfo"}],"name":"system"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/system/cora"}}}} | OK |

*!
!2 Test with new system
!***> Create data of recordType system

!| RecordEndpointFixture |
| type | json | testCreateRecord? | getStatusType? | getCreatedId? |
| system | {"name":"system","children":[{"name":"recordInfo","children":[{"name":"id","value":"fitnesse"}]},{"name":"systemName","value":"cora"}]} | {"record":{"data":{"children":[{"children":[{"name":"id","value":"fitnesse"},{"name":"type","value":"system"},{"name":"createdBy","value":"userId"}],"name":"recordInfo"},{"name":"systemName","value":"cora"}],"name":"system"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/fitnesse","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/system/fitnesse","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/system/fitnesse"}}}} | CREATED | $createdId= |

*!
!***> List data(system)

!| RecordEndpointFixture |
| type | testReadRecordList? | getStatusType? |
| system | {"dataList":{"fromNo":"1","data":[{"record":{"data":{"children":[{"name":"systemName","value":"Cora"},{"children":[{"name":"id","value":"cora"},{"name":"type","value":"system"},{"name":"createdBy","value":"userId"}],"name":"recordInfo"}],"name":"system"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/system/cora","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/system/cora"}}}},{"record":{"data":{"children":[{"children":[{"name":"id","value":"fitnesse"},{"name":"type","value":"system"},{"name":"createdBy","value":"userId"}],"name":"recordInfo"},{"name":"systemName","value":"cora"}],"name":"system"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/fitnesse","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/system/fitnesse","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/system/fitnesse"}}}}],"totalNo":"2","containDataOfType":"system","toNo":"2"}} | OK |

*!
!***> Update data of recordType system

!| RecordEndpointFixture |
| type | id | json | testUpdateRecord? | getStatusType? |
| system | $createdId | {"children":[{"name":"systemName","value":"notCora"},{"children":[{"name":"id","value":"$createdId"},{"name":"type","value":"system"},{"name":"createdBy","value":"userId"}],"name":"recordInfo"}],"name":"system"} | {"record":{"data":{"children":[{"name":"systemName","value":"notCora"},{"children":[{"name":"id","value":"fitnesse"},{"name":"type","value":"system"},{"name":"createdBy","value":"userId"}],"name":"recordInfo"}],"name":"system"},"actionLinks":{"read":{"requestMethod":"GET","rel":"read","url":"http://localhost:8080/therest/rest/record/system/fitnesse","accept":"application/uub+record+json"},"update":{"requestMethod":"POST","rel":"update","contentType":"application/uub+record+json","url":"http://localhost:8080/therest/rest/record/system/fitnesse","accept":"application/uub+record+json"},"delete":{"requestMethod":"DELETE","rel":"delete","url":"http://localhost:8080/therest/rest/record/system/fitnesse"}}}} | OK |

*!
